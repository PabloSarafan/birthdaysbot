# Telegram Bot "Я писька"

Простой Telegram бот, который отвечает "Я писька" на любое текстовое сообщение.

## Требования

- Python 3.7+ (рекомендуется 3.11-3.13)
- Токен Telegram бота (получить у [@BotFather](https://t.me/BotFather))

**Примечание**: Для Python 3.13+ проект включает совместимый модуль `imghdr.py`, так как этот модуль был удален из стандартной библиотеки.

## Установка и запуск локально

1. Клонируйте репозиторий:
```bash
git clone <your-repo-url>
cd birthdaysbot
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python3 -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
```

5. Откройте `.env` и вставьте ваш токен бота:
```
BOT_TOKEN=ваш_токен_от_BotFather
```

6. Запустите бота:
```bash
python bot.py
```

## Получение токена бота

1. Откройте Telegram и найдите [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newbot`
3. Следуйте инструкциям: придумайте имя и username для бота
4. BotFather отправит вам токен - скопируйте его в `.env` файл

## Деплой через Caprover

1. Убедитесь, что у вас установлен Caprover CLI:
```bash
npm install -g caprover
```

2. Войдите в ваш Caprover сервер:
```bash
caprover login
```

3. Создайте приложение в Caprover dashboard (если ещё не создано)

4. Добавьте переменную окружения `BOT_TOKEN` в настройках приложения в Caprover

5. Деплойте бота:
```bash
caprover deploy
```

6. Выберите ваше приложение из списка

## Структура проекта

```
birthdaysbot/
├── bot.py              # Основной файл с логикой бота
├── requirements.txt    # Python зависимости
├── Dockerfile         # Docker образ
├── captain-definition # Конфигурация Caprover
├── .env.example       # Пример переменных окружения
├── .gitignore        # Git ignore
└── README.md         # Этот файл
```

## Как работает бот

Бот использует библиотеку `python-telegram-bot` (версия 13.15) и работает в режиме polling:
- Принимает любые текстовые сообщения (кроме команд)
- Отвечает на каждое сообщение текстом "Я писька"
- Логирует все входящие сообщения для отладки

## Логирование

Бот использует базовое логирование на уровне INFO:
- Записывает информацию о запуске
- Логирует каждое входящее сообщение с ID пользователя
- Выводит ошибки при отсутствии токена

## Лицензия

MIT

